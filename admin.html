<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; }
    </style>
</head>
<body class="bg-slate-900 min-h-screen flex items-center justify-center p-4 relative overflow-hidden">

    <div class="absolute top-0 left-0 w-64 h-64 bg-blue-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
    <div class="absolute bottom-0 right-0 w-64 h-64 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>

    <a href="/" class="absolute top-8 left-8 flex items-center gap-2 text-slate-400 hover:text-white transition-colors group z-20">
        <div class="bg-slate-800 p-2 rounded-lg group-hover:bg-blue-600 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        </div>
        <span class="font-medium">Back to Home</span>
    </a>

    <div class="bg-white p-8 md:p-10 rounded-2xl shadow-2xl w-full max-w-md z-10 relative">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-slate-800">Add Service</h2>
            <p class="text-slate-500 text-sm mt-2">Enter details to update the directory.</p>
        </div>
        
        <form id="addForm" class="space-y-5">
            <div>
                <label class="block text-xs font-bold uppercase text-slate-500 tracking-wider mb-1">Admin Secret</label>
                <input type="password" id="secret" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all" placeholder="••••••••" required>
            </div>
            
            <div class="border-t border-slate-100 my-2"></div>

            <div>
                <label class="block text-xs font-bold uppercase text-slate-500 tracking-wider mb-1">Service Title</label>
                <input type="text" id="title" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all" placeholder="e.g. Google Drive" required>
            </div>
            
            <div>
                <label class="block text-xs font-bold uppercase text-slate-500 tracking-wider mb-1">Description</label>
                <input type="text" id="description" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all" placeholder="Short description..." required>
            </div>
            
            <div>
                <label class="block text-xs font-bold uppercase text-slate-500 tracking-wider mb-1">Link URL</label>
                <input type="url" id="link" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all" placeholder="https://example.com" required>
            </div>

            <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 active:scale-[0.98] transition-all font-bold shadow-lg shadow-blue-500/30 mt-4">
                Add to Directory
            </button>
        </form>
    </div>

    <script>
        const API_URL = "https://fh-api.ferhathamza17.workers.dev/api/services";

        document.getElementById('addForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Saving...";
            btn.disabled = true;

            const secret = document.getElementById('secret').value;
            const data = {
                title: document.getElementById('title').value,
                description: document.getElementById('description').value,
                link: document.getElementById('link').value
            };

            try {
                const res = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': secret 
                    },
                    body: JSON.stringify(data)
                });

                if (res.ok) {
                    alert('Success! Service added.');
                    document.getElementById('addForm').reset();
                    document.getElementById('secret').value = secret; 
                } else {
                    alert('Error: Incorrect password or server issue.');
                }
            } catch (err) {
                alert('Connection error.');
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        });
    </script>
</body>
</html>
